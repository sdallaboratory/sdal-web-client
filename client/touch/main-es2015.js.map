{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app-routing.module.ts","./src/app/app.module.ts","./src/app/components/about-modal/about-modal.component.html","./src/app/components/about-modal/about-modal.component.ts","./src/app/components/app/app.component.html","./src/app/components/app/app.component.ts","./src/app/components/footer/footer.component.html","./src/app/components/footer/footer.component.ts","./src/app/components/home/home.component.html","./src/app/components/home/home.component.ts","./src/app/components/lesson-details/lesson-details.component.html","./src/app/components/lesson-details/lesson-details.component.ts","./src/app/components/recommendations/recommendations.component.html","./src/app/components/recommendations/recommendations.component.ts","./src/app/components/schedule-day/schedule-day.component.html","./src/app/components/schedule-day/schedule-day.component.ts","./src/app/components/schedule-table/schedule-table.component.html","./src/app/components/schedule-table/schedule-table.component.ts","./src/app/components/search/search.component.html","./src/app/components/search/search.component.ts","./src/app/components/targets/targets.component.html","./src/app/components/targets/targets.component.ts","./src/app/interceptors/api-interceptor.service.ts","./src/app/material-imports/material-imports.module.ts","./src/app/pipes/in-storage.pipe.ts","./src/app/pipes/lesson-number.pipe.ts","./src/app/pipes/lesson-tooltip.pipe.ts","./src/app/pipes/option.pipe.ts","./src/app/pipes/score-icon.pipe.ts","./src/app/pipes/time-range.pipe.ts","./src/app/pipes/week.pipe.ts","./src/app/services/api.service.ts","./src/app/services/demo.service.ts","./src/app/services/groups.service.ts","./src/app/services/history.service.ts","./src/app/services/init.service.ts","./src/app/services/now-time.service.ts","./src/app/services/recommender.service.ts","./src/app/services/responsive.service.ts","./src/app/services/route-params.service.ts","./src/app/services/schedule.service.ts","./src/app/services/search.service.ts","./src/app/services/session.service.ts","./src/app/services/storage.service.ts","./src/app/services/targets.service.ts","./src/app/services/theme.service.ts","./src/app/utils/compare-students.ts","./src/app/utils/create-guid.ts","./src/app/utils/day-from-number.ts","./src/app/utils/get-campus.ts","./src/app/utils/lang/enumerate.ts","./src/app/utils/normalize-query.ts","./src/app/utils/random-element.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { HomeComponent } from './components/home/home.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '**',\r\n    component: HomeComponent,\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule, APP_INITIALIZER } from '@angular/core';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './components/app/app.component';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { HTTP_INTERCEPTORS, HttpClientModule } from '@angular/common/http';\r\nimport { ApiInterceptorService } from './interceptors/api-interceptor.service';\r\nimport { MaterialImportsModule } from './material-imports/material-imports.module';\r\nimport { HomeComponent } from './components/home/home.component';\r\nimport { InitService } from './services/init.service';\r\nimport { SearchComponent } from './components/search/search.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TargetsComponent } from './components/targets/targets.component';\r\nimport { ScheduleTableComponent } from './components/schedule-table/schedule-table.component';\r\nimport { ScheduleDayComponent } from './components/schedule-day/schedule-day.component';\r\nimport { LessonTooltipPipe } from './pipes/lesson-tooltip.pipe';\r\nimport { LessonDetailsComponent } from './components/lesson-details/lesson-details.component';\r\nimport { RecommendationsComponent } from './components/recommendations/recommendations.component';\r\nimport { LessonNumberPipe } from './pipes/lesson-number.pipe';\r\nimport { OptionPipe } from './pipes/option.pipe';\r\nimport { HasSchedulePipe } from './pipes/has-schedule.pipe';\r\nimport { ScoreIconPipe } from './pipes/score-icon.pipe';\r\nimport { FooterComponent } from './components/footer/footer.component';\r\nimport { AboutModalComponent } from './components/about-modal/about-modal.component';\r\nimport { WeekPipe } from './pipes/week.pipe';\r\nimport { TimeRangePipe } from './pipes/time-range.pipe';\r\nimport { VkOauthComponent } from './components/vk-oauth/vk-oauth.component';\r\nimport { ServiceWorkerModule } from '@angular/service-worker';\r\nimport { environment } from '../environments/environment';\r\nimport { InStoragePipe } from './pipes/in-storage.pipe';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    HomeComponent,\r\n    SearchComponent,\r\n    TargetsComponent,\r\n    ScheduleTableComponent,\r\n    ScheduleDayComponent,\r\n    LessonTooltipPipe,\r\n    LessonDetailsComponent,\r\n    RecommendationsComponent,\r\n    LessonNumberPipe,\r\n    OptionPipe,\r\n    HasSchedulePipe,\r\n    ScoreIconPipe,\r\n    FooterComponent,\r\n    AboutModalComponent,\r\n    WeekPipe,\r\n    TimeRangePipe,\r\n    VkOauthComponent,\r\n    InStoragePipe\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    ServiceWorkerModule.register('./ngsw-worker.js', { enabled: environment.production }),\r\n    AppRoutingModule,\r\n    BrowserAnimationsModule,\r\n    FormsModule,\r\n    HttpClientModule,\r\n    MaterialImportsModule,\r\n  ],\r\n  providers: [\r\n    { provide: HTTP_INTERCEPTORS, useClass: ApiInterceptorService, multi: true },\r\n    {\r\n      provide: APP_INITIALIZER,\r\n      useFactory: (init: InitService) => () => init.init(),\r\n      deps: [InitService],\r\n      multi: true\r\n    },\r\n    LessonNumberPipe\r\n  ],\r\n  bootstrap: [AppComponent],\r\n  entryComponents: [AboutModalComponent]\r\n})\r\nexport class AppModule { }\r\n","<header>\r\n    <div>\r\n        <img src=\"assets/logo/touch-logo.svg\" alt=\"SDAL Touch\">\r\n    </div>\r\n    <button tabindex=\"0\" mat-icon-button (click)=\"close()\">\r\n        <mat-icon>clear</mat-icon>\r\n    </button>\r\n</header>\r\n<h1>Выбери время для встречи с друзьями</h1>\r\n<p>\r\n    Выбрать время для встречи с друзьями из Бауманки с новым сервисом от <a href=\"https://sdal.pw\">Лаборатории анализа\r\n        социальных данных</a> просто как никогда.\r\n</p>\r\n<ol class=\"steps\">\r\n    <li>\r\n        <h1>1</h1>\r\n        <div>Добавь через строку поиска несколько групп, расписание которых ты хочешь сравнить.</div>\r\n    </li>\r\n    <li>\r\n        <h1>2</h1>\r\n        <div>Перейди к списку рекомендаций, сформированных системой автоматически.</div>\r\n    </li>\r\n    <li>\r\n        <h1>3</h1>\r\n        <div>Выбери одну из рекомендаций или подбери время самостоятельно на основе сводной таблицы.</div>\r\n    </li>\r\n</ol>\r\n<h2>Любитель тёмных тем?</h2>\r\n<mat-slide-toggle [(ngModel)]=\"theme.isDark\">Киберрежим</mat-slide-toggle>\r\n<br><br>\r\n<!-- Киберрежим специально для тебя!<br><br> -->\r\nВыбранное расписание сохраняется и ты можешь смотреть его даже оффлайн! Вот и всё, пользуйся на здоровье!<br><br>\r\n<button class=\"raised\" (click)=\"close()\" mat-raised-button color=\"accent\">\r\n    <mat-icon>check_circle_outline</mat-icon>&nbsp;Я всё понял!\r\n</button>\r\n<!-- <h2>Фидбек</h2>\r\n<br>\r\nЧто-то неясно? Знаешь, как сделать приложение лучше? Хочешь поучаствовать в разработке? -->\r\n<!-- <mat-form-field>\r\n    <textarea #textarea [disabled]=\"sent\" matInput cols=\"30\" rows=\"5\" placeholder=\"Оставь комментарий\"\r\n        [(ngModel)]=\"comment\"></textarea>\r\n</mat-form-field>\r\n<button [disabled]=\"!comment\" *ngIf=\"!sent\" class=\"raised\" mat-raised-button color=\"primary\" (click)=\"send()\">\r\n    <mat-icon>send</mat-icon>&nbsp;Отправить\r\n</button>\r\n<button *ngIf=\"sent\" class=\"raised\" mat-raised-button color=\"primary\" (click)=\"sent = false; textarea.focus()\">\r\n    <mat-icon>accessibility_new</mat-icon>&nbsp;Хочу написать ещё!\r\n</button> -->","import { Component, OnInit, Inject } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { ThemeService } from 'src/app/services/theme.service';\r\n\r\n@Component({\r\n  selector: 'sdal-about-modal',\r\n  templateUrl: './about-modal.component.html',\r\n  styleUrls: ['./about-modal.component.scss']\r\n})\r\nexport class AboutModalComponent implements OnInit {\r\n\r\n  public comment = '';\r\n  public sent = false;\r\n\r\n  constructor(\r\n    public dialogRef: MatDialogRef<AboutModalComponent>,\r\n    private readonly api: ApiService,\r\n    public readonly theme: ThemeService,\r\n  ) { }\r\n\r\n  close(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  async send() {\r\n    this.sent = true;\r\n    await this.api.sendComment(this.comment).toPromise();\r\n    this.comment = '';\r\n  }\r\n\r\n}\r\n","<router-outlet></router-outlet>","import { Component } from '@angular/core';\r\nimport { RouteParamsService } from '../../services/route-params.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ResponsiveService } from '../../services/responsive.service';\r\nimport { first } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'sdal-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n  providers: [RouteParamsService],\r\n})\r\nexport class AppComponent {\r\n\r\n  constructor(\r\n    private readonly route: ActivatedRoute,\r\n    private readonly params: RouteParamsService,\r\n  ) {\r\n    params.init();\r\n  }\r\n\r\n  // public title = 'touch';\r\n}\r\n","<p>\r\n    <label>\r\n        <a href=\"https://sdal.pw\" class=\"copy\">\r\n            &copy; SDAL 2019\r\n        </a>\r\n    </label>\r\n    <button mat-raised-button color=\"primary\" (click)=\"openModal()\">\r\n        Что с этим делать\r\n        <mat-icon>help_outlined</mat-icon>\r\n    </button>\r\n</p>","import { Component, OnInit, Inject, AfterViewInit } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA, MatDialog } from '@angular/material/dialog';\r\nimport { AboutModalComponent } from '../about-modal/about-modal.component';\r\nimport { StorageService } from 'src/app/services/storage.service';\r\n\r\n@Component({\r\n  selector: 'sdal-footer',\r\n  templateUrl: './footer.component.html',\r\n  styleUrls: ['./footer.component.scss']\r\n})\r\nexport class FooterComponent implements AfterViewInit {\r\n\r\n  constructor(\r\n    public dialog: MatDialog,\r\n    private readonly storage: StorageService,\r\n  ) { }\r\n\r\n  openModal(): void {\r\n    const dialogRef = this.dialog.open(AboutModalComponent, {\r\n      width: '100vw',\r\n      maxWidth: '700px',\r\n      panelClass: 'about-modal-pane',\r\n      autoFocus: false,\r\n      // maxHeight: '90vh'\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    const user = this.storage.getUser();\r\n    if (!user) {\r\n      this.storage.setUser({});\r\n      this.openModal();\r\n    }\r\n  }\r\n\r\n}\r\n","<mat-sidenav-container class=\"example-sidenav-container\">\r\n\r\n    <mat-sidenav #snav [mode]=\"(responsive.mobile | async) ? 'over' : 'side'\" [opened]=\"opened | async\"\r\n        class=\"mat-elevation-z6\">\r\n        <div class=\"scroll-box\">\r\n            <button mat-mini-fab (click)=\"snav.toggle()\" class=\"close-button\"\r\n                *ngIf=\"(target.targetsObservable | async)?.length\">\r\n                <mat-icon>{{ (responsive.mobile | async) ? 'chevron_right' : 'chevron_left' }} </mat-icon>\r\n            </button>\r\n            <div class=\"touch-logo-wrapper\">\r\n                <img src=\"assets/logo/touch-logo.svg\" alt=\"SDAL Touch\" class=\"touch-logo\">\r\n            </div>\r\n            <div>\r\n                <sdal-targets></sdal-targets>\r\n            </div>\r\n            <div *ngIf=\"(responsive.mobile | async) && ((target.targetsObservable | async)?.length)\">\r\n                <p>Перейдите к таблице или добавьте группы в сравнение ниже</p>\r\n                <button class=\"close-mobile\" mat-raised-button color=\"primary\" (click)=\"snav.toggle()\">\r\n                    Перейти к таблице\r\n                </button>\r\n            </div>\r\n            <div>\r\n                <sdal-search></sdal-search>\r\n            </div>\r\n            <!-- <div>\r\n                <sdal-vk-oauth></sdal-vk-oauth>\r\n            </div> -->\r\n            <footer>\r\n                <sdal-footer></sdal-footer>\r\n            </footer>\r\n        </div>\r\n    </mat-sidenav>\r\n\r\n    <mat-sidenav-content>\r\n        <span>\r\n            <button mat-mini-fab (click)=\"snav.toggle()\" class=\"menu-button\" *ngIf=\"!snav.opened\">\r\n                <mat-icon>menu</mat-icon>\r\n            </button>\r\n        </span>\r\n        <div class=\"scroll-box\">\r\n            <sdal-recommendations></sdal-recommendations>\r\n            <sdal-schedule-table></sdal-schedule-table>\r\n            <sdal-lesson-details></sdal-lesson-details>\r\n        </div>\r\n    </mat-sidenav-content>\r\n</mat-sidenav-container>","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { ResponsiveService } from 'src/app/services/responsive.service';\r\nimport { MediaMatcher } from '@angular/cdk/layout';\r\nimport { first, filter, tap, map } from 'rxjs/operators';\r\nimport { TargetsService } from '../../services/targets.service';\r\nimport { combineLatest } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'sdal-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.scss']\r\n})\r\nexport class HomeComponent implements OnInit {\r\n\r\n  public mobileQuery: MediaQueryList;\r\n\r\n  private mobileQueryListener: () => void;\r\n\r\n  constructor(\r\n    public readonly changeDetectorRef: ChangeDetectorRef,\r\n    public readonly media: MediaMatcher,\r\n    public readonly responsive: ResponsiveService,\r\n    public readonly target: TargetsService,\r\n  ) {\r\n    this.mobileQuery = media.matchMedia('(max-width: 1000px)');\r\n    this.mobileQueryListener = () => changeDetectorRef.detectChanges();\r\n    this.mobileQuery.addListener(this.mobileQueryListener);\r\n    this.mobileQuery.addListener((event) => this.responsive.mobile.next(event.matches));\r\n    this.responsive.mobile.next(this.mobileQuery.matches);\r\n  }\r\n\r\n  public opened = combineLatest(\r\n    this.responsive.mobile,\r\n    this.target.targetsObservable,\r\n  ).pipe(\r\n    map(([isMobile, targets]) => !(isMobile && targets && targets.length)),\r\n    first(),\r\n  );\r\n\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<mat-card *ngIf=\"schedule.selectedLesson | async as lesson\" class=\"mat-elevation-z8\">\r\n    <!-- <div> -->\r\n    <mat-card-title>{{lesson.name}}\r\n        <button mat-icon-button (click)=\"schedule.selectedLesson.next(null)\">\r\n            <mat-icon>clear</mat-icon>\r\n        </button>\r\n    </mat-card-title>\r\n    <mat-card-content>\r\n        <mat-chip-list>\r\n\r\n            <mat-chip color=\"warn\" [selected]=\"true\">\r\n                <mat-icon>group</mat-icon> &nbsp;{{lesson.group}}\r\n            </mat-chip>\r\n            <mat-chip color=\"primary\" [selected]=\"true\" *ngIf=\"lesson\">\r\n                <mat-icon>calendar_today</mat-icon> &nbsp; {{lesson.week}}, {{lesson.day}}\r\n            </mat-chip>\r\n            <mat-chip color=\"primary\" [selected]=\"true\" *ngIf=\"lesson\">\r\n                <mat-icon>access_time</mat-icon> &nbsp; {{lesson.timeRange}}\r\n            </mat-chip>\r\n            <mat-chip color=\"accent\" [selected]=\"true\" *ngIf=\"lesson.type\">\r\n                <mat-icon>category</mat-icon> &nbsp;{{lesson.type}}\r\n            </mat-chip>\r\n            <mat-chip color=\"accent\" [selected]=\"true\" *ngIf=\"lesson.teacher\">\r\n                <mat-icon>record_voice_over</mat-icon> &nbsp;{{lesson.teacher}}\r\n            </mat-chip>\r\n            <mat-chip color=\"accent\" [selected]=\"true\" *ngIf=\"lesson.location\">\r\n                <mat-icon>my_location</mat-icon> &nbsp; {{lesson.location}}\r\n            </mat-chip>\r\n        </mat-chip-list>\r\n    </mat-card-content>\r\n    <!-- </div> -->\r\n</mat-card>","import { Component, OnInit } from '@angular/core';\r\nimport { ScheduleService } from 'src/app/services/schedule.service';\r\n\r\n@Component({\r\n  selector: 'sdal-lesson-details',\r\n  templateUrl: './lesson-details.component.html',\r\n  styleUrls: ['./lesson-details.component.scss']\r\n})\r\nexport class LessonDetailsComponent implements OnInit {\r\n\r\n  constructor(\r\n    public readonly schedule: ScheduleService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<div mat-button class=\"wrapper\" *ngIf=\"recommender.options | async as options\">\r\n    <h3 mat-subheader>Рекомендации</h3>\r\n    <ng-container *ngFor=\"let option of options; index as i\">\r\n        <mat-card *ngIf=\"full || i < 3\" class=\"list-item\" (click)=\"move(option)\">\r\n            <!-- [style.color]=\"'rgb(' + (250 - option.score * 5) +','+ option.score*5 +',0)'\" -->\r\n            <mat-icon class=\"item-icon\">{{option.score | scoreIcon}}</mat-icon>\r\n            {{option.score}}\r\n            <div class=\"option\">\r\n                <!-- href=\"#{{option.week + '-' + option.day}}\"> -->\r\n                {{option | option : false}}\r\n            </div>\r\n            <br>\r\n        </mat-card>\r\n    </ng-container>\r\n    <p>\r\n        <mat-slide-toggle [(ngModel)]=\"full\">Показать все рекомендации</mat-slide-toggle>\r\n    </p>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { RecommenderService } from 'src/app/services/recommender.service';\r\nimport _ from 'lodash';\r\nimport { Option } from '../../models/recommendations-models';\r\n\r\n@Component({\r\n  selector: 'sdal-recommendations',\r\n  templateUrl: './recommendations.component.html',\r\n  styleUrls: ['./recommendations.component.scss']\r\n})\r\nexport class RecommendationsComponent implements OnInit {\r\n\r\n  public full = false;\r\n\r\n  constructor(\r\n    public readonly recommender: RecommenderService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  public move(option: Option) {\r\n    const timeRange = option.timeRange.replace(' - ', '-');\r\n    location.hash = '';\r\n    setTimeout(() => location.hash = `${option.week}-${option.day}-${timeRange}`, 50);\r\n  }\r\n\r\n}\r\n","<!-- <h3 mat-header>{{day.dayName}}</h3>\r\n<mat-card [attr.id]=\"id\" [class.today]=\"isToday\">\r\n    <div class=\"time-slot\">\r\n        <div *ngFor=\"let group of groups\">\r\n            {{group}}\r\n        </div>\r\n    </div>\r\n    <div *ngFor=\"let slot of day.timeSlots; let odd = odd;\" class=\"time-slot\" [class.odd]=\"odd\">\r\n        <div class=\"time-range\">{{slot.timeRange}}</div>\r\n        <div class=\"groups-lessons\">\r\n            <ng-container *ngFor=\"let lesson of slot.groupsLessons\">\r\n                <div *ngIf=\"lesson.name; else empty\" [style.background]=\"lesson.color\"\r\n                    [matTooltip]=\"lesson | lessonTooltip\" class=\"group-lesson\" (click)=\"selectLesson(lesson)\">\r\n                    {{lesson.type}}\r\n                    <ng-container *ngIf=\"slot.groupsLessons.length <= 2\">\r\n                        {{lesson.name}}\r\n                    </ng-container> {{lesson.location}}\r\n                </div>\r\n            </ng-container>\r\n            <ng-template #empty>\r\n                <div></div>\r\n            </ng-template>\r\n        </div>\r\n    </div>\r\n</mat-card> -->\r\n\r\n<h3 mat-subheader>{{day.dayName}}\r\n    <ng-container *ngIf=\"isToday\">\r\n        (сегодня)\r\n    </ng-container>\r\n</h3>\r\n<mat-card [attr.id]=\"id\" [class.today]=\"isToday\" color=\"primary\">\r\n    <table>\r\n        <tr class=\"time-slot\">\r\n            <th class=\"time-range\" style=\"width: 43px\"></th>\r\n            <th *ngFor=\"let group of groups\" [style.width.%]=\"width\">\r\n                {{group}}\r\n            </th>\r\n        </tr>\r\n        <tr *ngFor=\"let slot of day.timeSlots; let odd = odd;\" class=\"time-slot\" [class.odd]=\"odd\"\r\n            [attr.id]=\"getSlotId(slot)\" [class.selected]=\"getSlotId(slot) === hash\">\r\n            <td class=\"time-range\">\r\n                <span>{{slot.timeRange | timeRange : 'start' }}</span><br>\r\n                <span>{{slot.timeRange | timeRange : 'finish'}}</span>\r\n            </td>\r\n            <!-- < class=\"groups-lessons\"> -->\r\n            <ng-container *ngFor=\"let lesson of slot.groupsLessons\">\r\n                <td *ngIf=\"lesson.name; else empty\" [style.background]=\"lesson.color\"\r\n                    [matTooltip]=\"lesson | lessonTooltip\" class=\"group-lesson\" (click)=\"selectLesson(lesson)\">\r\n                    {{lesson.type}}\r\n                    <ng-container *ngIf=\"slot.groupsLessons.length <= 2\">\r\n                        {{lesson.name}}\r\n                    </ng-container> {{lesson.location}}\r\n                </td>\r\n            </ng-container>\r\n            <ng-template #empty>\r\n                <td></td>\r\n            </ng-template>\r\n            <!-- </> -->\r\n        </tr>\r\n    </table>\r\n</mat-card>","import { Component, OnInit, Input } from '@angular/core';\r\nimport { CombinedDaySchedule, FullLesson, ScheduleTimeSlot } from 'src/app/models/schedule-models';\r\nimport { ScheduleService } from 'src/app/services/schedule.service';\r\nimport { NowTimeService } from 'src/app/services/now-time.service';\r\n\r\n@Component({\r\n  selector: 'sdal-schedule-day',\r\n  templateUrl: './schedule-day.component.html',\r\n  styleUrls: ['./schedule-day.component.scss']\r\n})\r\nexport class ScheduleDayComponent implements OnInit {\r\n\r\n  @Input()\r\n  public day!: CombinedDaySchedule;\r\n\r\n  constructor(\r\n    private readonly schedule: ScheduleService,\r\n    private readonly nowTime: NowTimeService,\r\n  ) { }\r\n\r\n  public width = 100;\r\n\r\n  public get hash() {\r\n    return decodeURI(location.hash).slice(1);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.schedule.combinedSchedule.subscribe(s => {\r\n      this.width = 100 / (s && s[0].days[0].timeSlots[0].groupsLessons.length || 1);\r\n    });\r\n  }\r\n\r\n  public selectLesson(lesson: FullLesson) {\r\n    this.schedule.selectedLesson.next(lesson);\r\n  }\r\n\r\n  public get id() {\r\n    // TODO: Filth\r\n    const { week, day } = this.day.timeSlots[0].groupsLessons[0];\r\n    return `${week}-${day}`.toLowerCase();\r\n  }\r\n\r\n  public get isToday() {\r\n    const { week, day } = this.day.timeSlots[0].groupsLessons[0];\r\n    return this.nowTime.today === day && this.nowTime.currentWeek.weekName === week;\r\n  }\r\n\r\n  public get groups() {\r\n    return this.day.timeSlots[0].groupsLessons.map(l => l.group);\r\n  }\r\n\r\n  public getSlotId(slot: ScheduleTimeSlot) {\r\n    const range = slot.timeRange.replace(' - ', '-');\r\n    return `${this.id}-${range}`;\r\n  }\r\n}\r\n","<ng-container *ngIf=\"schedule.combinedSchedule | async as combinedSchedule; else noSchedule\">\r\n    <div *ngFor=\"let week of combinedSchedule\" class=\"week-schedule\">\r\n        <h2 mat-header> {{week.weekName }} ({{week.weekName | week}})</h2>\r\n        <sdal-schedule-day *ngFor=\"let day of week.days\" [day]=\"day\">\r\n        </sdal-schedule-day>\r\n    </div>\r\n</ng-container>\r\n<ng-template #noSchedule>\r\n    <p style=\"height: 80vh; display: flex; align-items: center;\">Выберите группы для сравнения расписания.</p>\r\n</ng-template>","import { Component, OnInit, AfterViewInit } from '@angular/core';\r\nimport { ScheduleService } from 'src/app/services/schedule.service';\r\n\r\n@Component({\r\n  selector: 'sdal-schedule-table',\r\n  templateUrl: './schedule-table.component.html',\r\n  styleUrls: ['./schedule-table.component.scss']\r\n})\r\nexport class ScheduleTableComponent implements OnInit {\r\n\r\n  constructor(\r\n    public readonly schedule: ScheduleService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<h3 mat-subheader>\r\n    {{(targets.targetsObservable | async)?.length ? 'Добавить группы в сравнение' : 'Найти расписания групп'}}\r\n\r\n</h3>\r\n<mat-form-field mat-list-item>\r\n    <button color=\"primary\" mat-raised-button matSuffix (click)=\"addFirst.next(); query.value = '';\"\r\n        *ngIf=\"(search.groupsCount | async) == 1\">\r\n        <mat-icon>add</mat-icon> Добавить {{(search.results | async).groups[0]}}\r\n    </button>\r\n    <input #query type=\"text\" matInput (keydown.enter)=\"addFirst.next()\" placeholder=\"Введите название группы...\">\r\n    <button mat-icon-button matSuffix (click)=\"query.value = ''; clear.next()\"\r\n        [style.visibility]=\"query.value ? 'initial' : 'hidden'\">\r\n        <mat-icon>clear</mat-icon>\r\n    </button>\r\n    <!-- <button mat-icon-button matPrefix>\r\n        <mat-icon>help_outlined</mat-icon>\r\n    </button> -->\r\n    <mat-hint *ngIf=\"(search.groupsCount | async) == 1\">Нажмите Enter, чтобы добавить</mat-hint>\r\n</mat-form-field>\r\n<ng-container *ngIf=\"search.results | async as results\">\r\n    <mat-action-list *ngIf=\"results.groups || results.students\">\r\n        <ng-container *ngIf=\"results.groups\">\r\n            <h3 mat-subheader>Группы</h3>\r\n            <mat-list-item *ngFor=\"let group of groups | async\" (click)=\"addGroup(group)\">\r\n                <mat-icon mat-list-icon>supervised_user_circle</mat-icon>\r\n                <h4 mat-line class=\"group\">{{group}}</h4>\r\n                <!-- <span mat-line >{{history.history.get(group)}} {{((history.history.get(group) || 0) % 10) | i18nPlural : {'=0': 'No messages.', '=1': 'One message.', 'other': '# messages.'}}}</span> -->\r\n                <mat-icon class=\"cached\" *ngIf=\"group | inStorage\"\r\n                    matTooltip=\"Расписание группы закешировано и доступно оффлайн\">cached</mat-icon>\r\n                <button class=\"add-button\" mat-icon-button matTooltip=\"Добавить группу к сравнению\">\r\n                    <mat-icon>add_circle_outlined</mat-icon>\r\n                </button>\r\n            </mat-list-item>\r\n        </ng-container>\r\n        <!-- <mat-divider></mat-divider> -->\r\n        <!-- <ng-container *ngIf=\"results.students\">\r\n            <h3 mat-subheader>Студенты</h3>\r\n            <mat-list-item *ngFor=\"let student of results.students\">\r\n                <img mat-list-icon [src]=\"student.avatar\" *ngIf=\"student.avatar\" style=\"transform: scale(1.7)\">\r\n                <mat-icon mat-list-icon *ngIf=\"!student.avatar\">person</mat-icon>\r\n                <h4 mat-line>{{student.name}}</h4>\r\n                <p mat-line class=\"group\"> {{student.group}}</p>\r\n                <button class=\"add-button\" mat-icon-button (click)=\"targets.addStudent(student)\"\r\n                    *ngIf=\"student.group | hasSchedule\">\r\n                    <mat-icon>add_circle_outlined</mat-icon>\r\n                </button>\r\n            </mat-list-item>\r\n        </ng-container> -->\r\n        <mat-list-item mat-button *ngIf=\"(search.groupsCount | async) - (groups | async).length as count\"\r\n            (click)=\"limitClickStream.next(true)\">\r\n            <mat-icon mat-list-icon>more_horiz</mat-icon>\r\n            Показать ещё {{count}}\r\n        </mat-list-item>\r\n    </mat-action-list>\r\n\r\n    <p *ngIf=\"!results.groups && !query.value\">\r\n        Введите запрос, чтобы найти группы\r\n    </p>\r\n    <p *ngIf=\"!results.groups && query.value\">\r\n        По вашему запросу ничего не найдено. Скорее всего, расписание искомой группы отсутсвует в\r\n        электоронном университете.\r\n    </p>\r\n</ng-container>\r\n","import { Component, OnInit, ViewChild, AfterViewInit, ElementRef } from '@angular/core';\r\nimport { merge, fromEvent, Subject, combineLatest, BehaviorSubject } from 'rxjs';\r\nimport { map, distinct, distinctUntilChanged, debounceTime, mergeMap, first } from 'rxjs/operators';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { TargetsService } from 'src/app/services/targets.service';\r\nimport _ from 'lodash';\r\nimport { HistoryService } from '../../services/history.service';\r\nimport { ResponsiveService } from '../../services/responsive.service';\r\nimport { StorageService } from '../../services/storage.service';\r\n\r\n@Component({\r\n  selector: 'sdal-search',\r\n  templateUrl: './search.component.html',\r\n  styleUrls: ['./search.component.scss']\r\n})\r\nexport class SearchComponent implements OnInit, AfterViewInit {\r\n\r\n  @ViewChild('query')\r\n  private queryElem!: ElementRef<HTMLInputElement>;\r\n\r\n  public readonly addFirst = new Subject();\r\n\r\n  public clear = new Subject();\r\n\r\n  constructor(\r\n    public readonly search: SearchService,\r\n    public readonly targets: TargetsService,\r\n    public readonly responsive: ResponsiveService,\r\n    public readonly history: HistoryService,\r\n    private readonly storage: StorageService,\r\n  ) {\r\n    this.addFirst.pipe(\r\n      mergeMap(() => search.results.pipe(first())),\r\n    ).subscribe(({ students, groups }) => {\r\n      if (groups && groups.length) {\r\n        this.targets.addGroup(groups[0]);\r\n      } else if (students && students.length) {\r\n        this.targets.addStudent(students[0]);\r\n      }\r\n    });\r\n  }\r\n\r\n  public limitClickStream = new BehaviorSubject(false);\r\n\r\n  public groups = combineLatest(\r\n    this.search.groups,\r\n    this.limitClickStream.pipe(\r\n      map(showAll => showAll ? Infinity : 8),\r\n    )\r\n  ).pipe(\r\n    map(([groups, limit]) => _.take(groups, limit)),\r\n  );\r\n\r\n  // public searchResultLength = this.search.results.pipe(\r\n  //   map(({ groups, students }) => (groups && groups.length || 0) + (students && students.length || 0)),\r\n  // );\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    const input = this.queryElem.nativeElement;\r\n    // Emit on clear\r\n    merge(fromEvent(input, 'input'), fromEvent(input, 'change'), this.clear).pipe(\r\n      map(() => input.value),\r\n      distinctUntilChanged(),\r\n      debounceTime(400),\r\n      // map()\r\n    ).subscribe(q => {\r\n      this.search.query.next(q);\r\n      this.limitClickStream.next(false);\r\n    });\r\n  }\r\n\r\n  public addGroup(group: string) {\r\n    this.targets.addGroup(group);\r\n  }\r\n\r\n\r\n\r\n  // public onClick() {\r\n  //   this.\r\n  // }\r\n\r\n\r\n}\r\n","<ng-container *ngIf=\"targets.targetsObservable | async as targetsList; else noTargets\">\r\n    <h3 mat-subheader class=\"header\">\r\n        <span> Расписания в сравнении </span>\r\n        <button mat-button (click)=\"targets.clear()\">\r\n            Очистить<mat-icon>clear</mat-icon>\r\n        </button>\r\n    </h3>\r\n    <mat-list>\r\n        <!-- TODO: remove style=\"transform: scale(1.7)\" attributes -->\r\n        <ng-container *ngFor=\"let target of targetsList\">\r\n            <mat-list-item *ngIf=\"target.students && target.students.length == 1 && target.students[0] as student;\">\r\n                <mat-icon mat-list-icon *ngIf=\"!target.scheduleLoaded\" style=\"transform: scale(1.7)\" class=\"loading\">\r\n                  autorenew</mat-icon>\r\n                <img mat-list-icon [src]=\"student.avatar\" *ngIf=\"target.scheduleLoaded && student.avatar\"\r\n                    style=\"transform: scale(1.7)\">\r\n                <mat-icon mat-list-icon *ngIf=\"target.scheduleLoaded && !student.avatar\" style=\"transform: scale(1.7)\">\r\n                    account_circle</mat-icon>\r\n\r\n                <h4 mat-line>{{student.name}}</h4>\r\n                <p mat-line class=\"group\"> {{student.group}}</p>\r\n                <button class=\"add-button\" mat-icon-button (click)=\"targets.removeGroup(target.group)\">\r\n                    <mat-icon>clear</mat-icon>\r\n                </button>\r\n            </mat-list-item>\r\n            <!-- TODO: [style.color]=\"target.color\" -->\r\n            <mat-list-item *ngIf=\"!target.students || target.students.length !== 1\">\r\n                <mat-icon mat-list-icon style=\"transform: scale(1.7)\" [class.loading]=\"!target.scheduleLoaded\">\r\n                    {{target.scheduleLoaded ? 'supervised_user_circle' : 'autorenew'}}\r\n                </mat-icon>\r\n                <h4 mat-line class=\"group\">{{target.group}}</h4>\r\n                <span mat-line *ngIf=\"target.students as students\">\r\n                    ({{students[0].name}}<ng-container *ngIf=\"students.length > 1\">\r\n                        и ещё {{students.length - 1}}</ng-container>)\r\n                </span>\r\n                <button class=\"add-button\" mat-icon-button (click)=\"targets.removeGroup(target.group)\" (click)=\"1+1\">\r\n                    <mat-icon>clear</mat-icon>\r\n                </button>\r\n            </mat-list-item>\r\n        </ng-container>\r\n    </mat-list>\r\n</ng-container>\r\n<ng-template #noTargets>\r\n    <p>Добавтьте несколько расписаний для сравнения.</p>\r\n</ng-template>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { TargetsService } from 'src/app/services/targets.service';\r\nimport { ResponsiveService } from '../../services/responsive.service';\r\n\r\n@Component({\r\n  selector: 'sdal-targets',\r\n  templateUrl: './targets.component.html',\r\n  styleUrls: ['./targets.component.scss']\r\n})\r\nexport class TargetsComponent implements OnInit {\r\n\r\n  constructor(\r\n    public readonly targets: TargetsService,\r\n    public readonly responsive: ResponsiveService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpInterceptor, HttpEvent, HttpHandler, HttpRequest } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ApiInterceptorService implements HttpInterceptor {\r\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\r\n    const httpReq = req.clone({\r\n      url: `${environment.backendOrigin}${req.url}`,\r\n    });\r\n\r\n    return next.handle(httpReq);\r\n  }\r\n\r\n  constructor() { }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatChipsModule } from '@angular/material/chips';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { MatSidenavModule } from '@angular/material/sidenav';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\n\r\nconst imports = [\r\n  MatButtonModule,\r\n  MatCardModule,\r\n  MatInputModule,\r\n  MatSidenavModule,\r\n  MatToolbarModule,\r\n  MatListModule,\r\n  MatIconModule,\r\n  MatTooltipModule,\r\n  MatChipsModule,\r\n  MatSlideToggleModule,\r\n  MatDialogModule,\r\n  MatProgressSpinnerModule,\r\n];\r\n\r\n@NgModule({\r\n  imports,\r\n  exports: imports,\r\n})\r\nexport class MaterialImportsModule { }\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { StorageService } from '../services/storage.service';\r\n\r\n@Pipe({\r\n  name: 'inStorage'\r\n})\r\nexport class InStoragePipe implements PipeTransform {\r\n\r\n  constructor(\r\n    private readonly storage: StorageService,\r\n  ) { }\r\n\r\n  transform(group: string): any {\r\n    return this.storage.hasGroupSchedule(group);\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'lessonNumber'\r\n})\r\nexport class LessonNumberPipe implements PipeTransform {\r\n\r\n  private readonly numbers = {\r\n    '08:30 - 10:05': 1,\r\n    '10:15 - 11:50': 2,\r\n    '12:00 - 13:35': 3,\r\n    '13:50 - 15:25': 4,\r\n    '15:40 - 17:15': 5,\r\n    '17:25 - 19:00': 6,\r\n    '19:10 - 20:45': 7,\r\n  };\r\n\r\n  public transform(timeRange: string) {\r\n    return (this.numbers as any)[timeRange];\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { FullLesson } from '../models/schedule-models';\r\n\r\n@Pipe({\r\n  name: 'lessonTooltip'\r\n})\r\nexport class LessonTooltipPipe implements PipeTransform {\r\n\r\n  transform(lesson: FullLesson): any {\r\n    const parts = [lesson.type, lesson.name, lesson.location, lesson.teacher];\r\n    return parts.join(' ');\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { RecommenderService } from '../services/recommender.service';\r\nimport { Option } from '../models/recommendations-models';\r\n\r\n@Pipe({\r\n  name: 'option'\r\n})\r\nexport class OptionPipe implements PipeTransform {\r\n\r\n  constructor(\r\n    private readonly recommender: RecommenderService\r\n  ) { }\r\n\r\n  transform(option: Option) {\r\n    return this.recommender.verbalize(option);\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'scoreIcon'\r\n})\r\nexport class ScoreIconPipe implements PipeTransform {\r\n\r\n  transform(score: number) {\r\n    if (score > 40) {\r\n      return 'star';\r\n    } else if (score > 35) {\r\n      return 'star_half';\r\n    } else {\r\n      return 'navigate_next';\r\n    }\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'timeRange'\r\n})\r\nexport class TimeRangePipe implements PipeTransform {\r\n\r\n  transform(timeRange: string, part: 'start' | 'finish'): any {\r\n    return timeRange.split(' - ')[part === 'start' ? 0 : 1];\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { NowTimeService } from '../services/now-time.service';\r\n\r\n@Pipe({\r\n  name: 'week'\r\n})\r\nexport class WeekPipe implements PipeTransform {\r\n\r\n  constructor(\r\n    private readonly nowTime: NowTimeService,\r\n  ) { }\r\n\r\n  transform(weekName: 'знаменатель' | 'числитель'): any {\r\n    return this.nowTime.currentWeek.weekName === weekName ? 'эта неделя' : 'следующая неделя';\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { GroupSchedule, WeekInfo } from '../models/schedule-models';\r\nimport { Student } from '../models/student';\r\nimport { TargetsTelemetry } from '../models/telemetry-models';\r\nimport { TouchUser } from '../models/touch-auth-models';\r\nimport { Observable } from 'rxjs/internal/Observable';\r\nimport { tap } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ApiService {\r\n\r\n  constructor(\r\n    private readonly http: HttpClient\r\n  ) { }\r\n\r\n  // TODO: Uppercase on server-side\r\n  public getSchedule(groupName: string): Observable<GroupSchedule> {\r\n    return this.http.get<GroupSchedule>(`/api/schedule/groups/${groupName.toUpperCase()}`).pipe(\r\n      tap((schedule: GroupSchedule) => schedule.name = schedule.name.trim())\r\n    );\r\n  }\r\n\r\n  public getGroups() {\r\n    return this.http.get<string[]>(`/api/schedule/groups`);\r\n  }\r\n\r\n  public searchStudents(query?: string, limit?: number, sessionId?: string) {\r\n    return this.http.get<Student[]>(`/api/students`, {\r\n      params: {\r\n        query,\r\n        limit,\r\n        sessionId\r\n        // group: { $exists: true },\r\n      } as any\r\n    });\r\n  }\r\n\r\n  public sendComment(comment: string) {\r\n\r\n    const message = {\r\n      comment,\r\n      timestamp: new Date().getTime(),\r\n    };\r\n\r\n    return this.http.post('/api/touch/comments', message);\r\n  }\r\n\r\n  public sendTargetsTelemetry(targetsInfo: TargetsTelemetry) {\r\n    return this.http.post('/api/touch/telemetry/targets', targetsInfo);\r\n  }\r\n\r\n  public getCurrentWeek() {\r\n    return this.http.get<WeekInfo>('/api/schedule/current-week');\r\n  }\r\n\r\n  public signOut(sessionId: string) {\r\n    return this.http.delete(`/api/touch/user/${sessionId}`);\r\n  }\r\n\r\n  public getTouchUser(sessionId: string) {\r\n    return this.http.get<TouchUser | null>(`/api/touch/user/${sessionId}`);\r\n  }\r\n\r\n}\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { TargetsService } from './targets.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DemoService {\r\n\r\n  public ira = {\r\n    name: 'Уланова Ирина Вадимовна',\r\n    group: 'СГН3-72Б',\r\n    avatar: 'https://sun9-35.userapi.com/c850720/v850720133/18ef38/lkCyM3Z0mTM.jpg?ava=1'\r\n  };\r\n\r\n  public serg = {\r\n    name: 'Соловьев Сергей Александрович',\r\n    group: 'СГН3-71Б'\r\n  };\r\n\r\n  constructor(\r\n    private readonly targets: TargetsService,\r\n  ) { }\r\n\r\n  async init() {\r\n    if (window.location.pathname.includes('/%D0%B4%D0%BB%D1%8F_%D0%B8%D1%80%D1%8B')) {\r\n      this.targets.addGroup('СГН3-72Б', [this.ira]);\r\n      this.targets.addGroup('СГН3-71Б', [this.serg]);\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ApiService } from './api.service';\r\nimport { normalizeText } from '../utils/normalize-query';\r\nimport { StorageService } from './storage.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GroupsService {\r\n\r\n  public names!: Set<string>;\r\n\r\n  constructor(\r\n    private readonly api: ApiService,\r\n    private readonly storage: StorageService\r\n  ) { }\r\n\r\n  public async init() {\r\n    let groups = this.storage.getGroups();\r\n    if (!groups) {\r\n      groups = await this.api.getGroups().toPromise();\r\n      this.storage.setGroups(groups);\r\n    } else {\r\n      this.api.getGroups().toPromise().then(gs => {\r\n        this.storage.setGroups(gs);\r\n        this.names = new Set(gs);\r\n      });\r\n    }\r\n    this.names = new Set(groups);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { TargetsService } from './targets.service';\r\nimport { StorageService } from './storage.service';\r\nimport { Target } from '../models/target';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class HistoryService {\r\n\r\n  public history = new Map<string, number>();\r\n\r\n  constructor(\r\n    private readonly targets: TargetsService,\r\n    private readonly storage: StorageService,\r\n  ) {\r\n    this.history = storage.getHistory();\r\n    targets.targetsObservable.subscribe(this.updateHistory.bind(this));\r\n  }\r\n\r\n  updateHistory(targets: Target[] | null) {\r\n    for (const { group } of targets || []) {\r\n      const count = this.history.get(group) || 0;\r\n      this.history.set(group, count + 1);\r\n    }\r\n    this.storage.setHistory(this.history);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { GroupsService } from './groups.service';\r\nimport { TelemetryService } from './telemetry.service';\r\nimport { ScheduleService } from './schedule.service';\r\nimport { NowTimeService } from './now-time.service';\r\nimport { ThemeService } from './theme.service';\r\nimport { DemoService } from './demo.service';\r\nimport { VkOauthService } from './vk-oauth.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class InitService {\r\n\r\n  private isInitialized = false;\r\n\r\n  constructor(\r\n    private readonly groups: GroupsService,\r\n    // private readonly telemetry: TelemetryService,\r\n    private readonly theme: ThemeService,\r\n    private readonly nowTime: NowTimeService,\r\n    private readonly demo: DemoService,\r\n    // private readonly auth: VkOauthService,\r\n  ) { }\r\n\r\n  /**\r\n   * Method to be executed befor the app starts.\r\n   */\r\n  public async init() {\r\n    if (this.isInitialized) {\r\n      throw new Error('Попытка повторной инициализации приложения');\r\n    }\r\n    this.isInitialized = true;\r\n    try {\r\n      // Here you can add your async initialization logic.\r\n      await Promise.all([\r\n        this.groups.init(),\r\n        this.nowTime.init(),\r\n        this.demo.init(),\r\n        // this.auth.init(),\r\n      ]);\r\n      console.log('Приложение было успешно инициализировано.');\r\n    } catch {\r\n      throw new Error('Во время инициализации приложения произошла ошибка.');\r\n    }\r\n\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ApiService } from './api.service';\r\nimport { WeekInfo } from '../models/schedule-models';\r\nimport { repeatWhen } from 'rxjs/operators';\r\nimport { interval } from 'rxjs/internal/observable/interval';\r\nimport { getDayFromNuber as getDayFromNumer, DayNumber } from '../utils/day-from-number';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NowTimeService {\r\n\r\n  public currentWeek!: WeekInfo;\r\n\r\n  public today!: string;\r\n\r\n  constructor(\r\n    private readonly api: ApiService,\r\n  ) { }\r\n\r\n  public async init() {\r\n    this.setThisDay();\r\n    setInterval(() => this.setThisDay(), 1000 * 60);\r\n\r\n    // TODO: Calculate week offline\r\n    const storedWeekString = localStorage.getItem('touch:week');\r\n    const { timestamp, week } = storedWeekString && JSON.parse(storedWeekString) || {};\r\n    this.currentWeek = week || await this.api.getCurrentWeek().toPromise();\r\n    localStorage.setItem('touch:week', JSON.stringify({\r\n      timestamp: new Date(),\r\n      week: this.currentWeek,\r\n    }));\r\n\r\n    this.api.getCurrentWeek().pipe(\r\n      repeatWhen(() => interval(1000 * 60 * 60)),\r\n    ).subscribe(week => {\r\n      this.currentWeek = week;\r\n    });\r\n\r\n    // if (!location.hash) {\r\n    //   const hash = `#${this.currentWeek}-${this.today}`;\r\n    //   window.location.hash = hash;\r\n    // }\r\n  }\r\n\r\n\r\n\r\n  setThisDay() {\r\n    this.today = getDayFromNumer(new Date().getDay() as DayNumber);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ScheduleService } from './schedule.service';\r\nimport { CombinedDaySchedule, FullLesson, Lesson, ScheduleTimeSlot, CombinedWeekSchedule } from '../models/schedule-models';\r\nimport { map, tap, combineLatest, shareReplay } from 'rxjs/operators';\r\nimport _ from 'lodash';\r\nimport { Option, ScoredOption } from '../models/recommendations-models';\r\nimport { getCampus } from '../utils/get-campus';\r\nimport { LessonNumberPipe } from '../pipes/lesson-number.pipe';\r\nimport { enumerate } from '../utils/lang/enumerate';\r\nimport { randomElement } from '../utils/random-element';\r\nimport { NowTimeService } from './now-time.service';\r\nimport { WeekPipe } from '../pipes/week.pipe';\r\nimport { Subject } from 'rxjs';\r\nimport { TargetsService } from './targets.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RecommenderService {\r\n\r\n  constructor(\r\n    private readonly schedule: ScheduleService,\r\n    private readonly nowTime: NowTimeService,\r\n    private readonly targets: TargetsService,\r\n  ) {\r\n    this.schedule.combinedSchedule.subscribe(async s => setTimeout(() => this.combinedSchedule.next(s)));\r\n  }\r\n\r\n  public readonly combinedSchedule = new Subject<CombinedWeekSchedule[] | null>();\r\n\r\n  private readonly daysOrder = new Map<string, number>([\r\n    ['пн', 1],\r\n    ['вт', 2],\r\n    ['ср', 3],\r\n    ['чт', 4],\r\n    ['пт', 5],\r\n    ['сб', 6],\r\n  ]);\r\n\r\n  public readonly options = this.combinedSchedule.pipe(\r\n    map(s => s || []),\r\n    // tap(a => console.log('recomputing', a)),\r\n    combineLatest(this.targets.targetsObservable),\r\n    map(([s, targets]) => targets && targets.length <= 1 ? [] : s),\r\n    map(s => _.flatten(s.map(d => d.days))),\r\n    map(days => days.filter(day => !this.isPassed(day))),\r\n    map(days => _.flatten(days.map(this.buildOptions.bind(this)))),\r\n    map(options => options.map(o => this.scoreOption(o))),\r\n    map(options => options.filter(o => o.score > 0)),\r\n    map(options => _.orderBy(options, o => -o.score)),\r\n    map(options => options.length ? options : null),\r\n    shareReplay(1),\r\n  );\r\n\r\n  daysCase = {\r\n    пн: 'в понедельник',\r\n    вт: 'во вторник',\r\n    ср: 'в среду',\r\n    чт: 'в четверг',\r\n    пт: 'в пятницу',\r\n    сб: 'в субботу',\r\n    вс: 'в воскресение',\r\n  } as { [day: string]: string };\r\n\r\n  private isPassed(day: CombinedDaySchedule) {\r\n    const week = day.timeSlots[0].groupsLessons[0].week;\r\n    const dayOrder = this.daysOrder.get(day.dayName) || 0;\r\n    const todayOrder = this.daysOrder.get(this.nowTime.today) || 0;\r\n    // return false;\r\n    return week === this.nowTime.currentWeek.weekName && dayOrder < todayOrder;\r\n  }\r\n\r\n  private isSlotFree(slot: ScheduleTimeSlot | undefined) {\r\n    return !slot || slot.groupsLessons.every(l => !l.name);\r\n  }\r\n\r\n  isMilitary(lessonName: string) {\r\n    const normalized = lessonName.split('/').join('').toLowerCase();\r\n    return normalized.includes('военная подготовка')\r\n      || /В\\/*П/.test(lessonName)\r\n      || /В\\/*К/.test(lessonName);\r\n  }\r\n\r\n  isPe(lessonName: string) {\r\n    const normalized = lessonName.split('/').join('').toLowerCase();\r\n    return normalized.includes('физкультура')\r\n      || normalized.includes('спорт')\r\n      || normalized.includes('валеология')\r\n      || normalized.includes('физическая культура');\r\n  }\r\n\r\n  private getLessonsBefore(timeSlots: ScheduleTimeSlot[], lessonNumber: number) {\r\n    const lessonsBefore = {} as { [group: string]: FullLesson };\r\n\r\n    for (let i = 0; i < lessonNumber - 1; i++) {\r\n      const slot = timeSlots[i];\r\n      for (const lesson of slot.groupsLessons) {\r\n        if (lesson.name) {\r\n          lessonsBefore[lesson.group] = lesson;\r\n        }\r\n      }\r\n    }\r\n\r\n    return lessonsBefore;\r\n  }\r\n\r\n  private getLessonsAfter(timeSlots: ScheduleTimeSlot[], lessonNumber: number) {\r\n    const lessonsAfter = {} as { [group: string]: FullLesson };\r\n\r\n    for (let i = 7 - 1; i > lessonNumber - 1; i--) {\r\n      const slot = timeSlots[i];\r\n      for (const lesson of slot.groupsLessons) {\r\n        if (lesson.name) {\r\n          lessonsAfter[lesson.group] = lesson;\r\n        }\r\n      }\r\n    }\r\n\r\n    return lessonsAfter;\r\n  }\r\n\r\n\r\n\r\n  private buildOptions({ dayName, timeSlots }: CombinedDaySchedule) {\r\n    const options: Option[] = [];\r\n\r\n    const flatten = _.flatten(timeSlots.map(s => s.groupsLessons)).filter(l => l.name);\r\n    const groups = timeSlots[0].groupsLessons.map(l => l.group);\r\n\r\n    const militaryDayGroups: string[] = [];\r\n    const peDayGroups: string[] = [];\r\n\r\n    for (const { name, group } of flatten) {\r\n      if (!name) {\r\n        continue;\r\n      }\r\n      if (this.isMilitary(name) && !militaryDayGroups.includes(group)) {\r\n        militaryDayGroups.push(group);\r\n      }\r\n      if (this.isPe(name) && !militaryDayGroups.includes(group)) {\r\n        peDayGroups.push(group);\r\n      }\r\n    }\r\n\r\n    const hasLessons = new Set(flatten.map(l => l.group));\r\n    const freeDayGroups: string[] = groups.filter(g => !hasLessons.has(g));\r\n\r\n    for (const slotToTest of timeSlots) {\r\n\r\n      const { week, day, timeRange, lessonNumber } = slotToTest.groupsLessons[0];\r\n\r\n      const prevSlot = timeSlots[lessonNumber - 1 - 1];\r\n      const nextSlot = timeSlots[lessonNumber + 1 - 1];\r\n\r\n      // TODO: Maybe suggest to meet in totally free days;\r\n      if (this.isSlotFree(prevSlot)\r\n        && this.isSlotFree(nextSlot)\r\n        || !this.isSlotFree(slotToTest)) {\r\n        continue;\r\n      }\r\n\r\n\r\n      // const lessonNumber = this.lessonNumber.transform(slotToTest.timeRange);\r\n\r\n      const lessonsBefore = this.getLessonsBefore(timeSlots, lessonNumber);\r\n      const lessonsAfter = this.getLessonsAfter(timeSlots, lessonNumber);\r\n\r\n      const locationsBefore = prevSlot && prevSlot.groupsLessons.map(l => l.location).filter(l => l);\r\n      const locationsAfter = nextSlot && nextSlot.groupsLessons.map(l => l.location).filter(l => l);\r\n\r\n\r\n      const sameCampusBefore = locationsBefore && locationsBefore.length === slotToTest.groupsLessons.length\r\n        && new Set(locationsBefore.map(l => l && getCampus(l))).size === 1 && getCampus(locationsBefore![0]!);\r\n\r\n      const sameCampusAfter = locationsAfter && locationsAfter.length === slotToTest.groupsLessons.length\r\n        && new Set(locationsAfter.map(l => l && getCampus(l))).size === 1 && getCampus(locationsAfter![0]!);\r\n\r\n      const sameClassroomBefore = sameCampusBefore\r\n        && new Set(locationsBefore).size === 1;\r\n\r\n      const sameClassroomAfter = sameCampusAfter\r\n        && new Set(locationsAfter).size === 1;\r\n\r\n      const totalWaitTime = [...Object.values(lessonsAfter), ...Object.values(lessonsBefore)]\r\n        .reduce((acc, cur) => acc + Math.abs(cur.lessonNumber - lessonNumber), 0);\r\n\r\n      const nearestLessonBefore = _.maxBy(Object.values(lessonsBefore), l => l.lessonNumber);\r\n      const nearestLessonAfter = _.minBy(Object.values(lessonsAfter), l => l.lessonNumber);\r\n\r\n      let type = 'free';\r\n      if (nearestLessonAfter && nearestLessonBefore) {\r\n        type = 'mixed';\r\n      } else if (nearestLessonBefore) {\r\n        type = 'after';\r\n      } else if (nearestLessonAfter) {\r\n        type = 'before';\r\n      }\r\n\r\n      const option = {\r\n        timeRange,\r\n        week,\r\n        day,\r\n        type,\r\n        lessonsBefore,\r\n        nearestLessonBeforeNumber: nearestLessonBefore && nearestLessonBefore.lessonNumber,\r\n        lessonsAfter,\r\n        nearestLessonAfterNumber: nearestLessonAfter && nearestLessonAfter.lessonNumber,\r\n        militaryDayGroups,\r\n        peDayGroups,\r\n        freeDayGroups,\r\n        sameCampusBefore,\r\n        sameClassroomBefore,\r\n        sameCampusAfter,\r\n        sameClassroomAfter,\r\n        totalWaitLessons: totalWaitTime,\r\n        // timeOfDay: 'morning',\r\n      } as Option;\r\n      options.push(option);\r\n    }\r\n    return options;\r\n  }\r\n\r\n  private scoreOption(option: Option) {\r\n    let score = 50;\r\n\r\n    if (option.type === 'after') {\r\n      score += 30;\r\n    } else if (option.type === 'before') {\r\n      score += 20;\r\n    } else if (option.type === 'mixed') {\r\n      score += 20;\r\n    } else if (option.type === 'free') {\r\n      score += 10;\r\n    }\r\n\r\n    // score -= option.maxLessonsWait * 5;\r\n    score -= option.totalWaitLessons * 6;\r\n\r\n    score -= (option.militaryDayGroups || []).length * 5;\r\n    score -= (option.freeDayGroups || []).length * 20;\r\n    score -= (option.peDayGroups || []).length * 2;\r\n\r\n    if (option.sameCampusBefore || option.sameCampusAfter) {\r\n      score += 15;\r\n    }\r\n\r\n    if (option.sameClassroomBefore || option.sameClassroomAfter) {\r\n      score += 30;\r\n    }\r\n\r\n    // TODO: Check if day has gone.\r\n    if (this.nowTime.currentWeek.weekName !== option.week) {\r\n      score -= 20;\r\n    }\r\n\r\n    const scored: ScoredOption = { ...option, score };\r\n\r\n    return scored;\r\n  }\r\n\r\n  public verbalize(option: Option, full?: boolean) {\r\n    const terms: string[] = [];\r\n    terms.push(randomElement([\r\n      'Устройте встречу',\r\n      'Договоритесь о встрече',\r\n      'Подходящее время для встречи',\r\n      'Можно встретиться',\r\n    ]));\r\n\r\n    // TODO: на этой неделе, на следующей неделе.\r\n    terms.push(`${this.daysCase[option.day]} на ${option.week === this.nowTime.currentWeek.weekName ? 'этой' : 'следующей'} неделе`);\r\n\r\n    switch (option.type) {\r\n      case 'before':\r\n        terms.push(`перед ${option.nearestLessonAfterNumber} парой`);\r\n        break;\r\n      case 'after':\r\n        terms.push(`после ${option.nearestLessonBeforeNumber} пары`);\r\n        break;\r\n      case 'mixed':\r\n        terms.push(`между ${option.nearestLessonBeforeNumber} и ${option.nearestLessonAfterNumber} парами`);\r\n        break;\r\n      case 'free':\r\n        terms.push(`в любое время, так как в этот день ни у кого нет пар`);\r\n        break;\r\n    }\r\n    terms.push('.');\r\n\r\n    if (option.sameClassroomBefore) {\r\n      terms.push('Очень удобное время, так последняя пара у вас - общая');\r\n    } else if (option.sameCampusBefore) {\r\n      terms.push(`Занятия у вас заканчиваются в одном корпусе - ${option.sameCampusBefore}.`);\r\n    }\r\n\r\n    if (option.sameClassroomAfter) {\r\n      terms.push('Первая после встречи пара у вас общая. Можете пойти туда вместе');\r\n    } else if (option.sameCampusAfter) {\r\n      terms.push(`Занятия как раз начинаются в одном корпусе - ${option.sameCampusAfter}.`);\r\n    }\r\n\r\n    if (option.militaryDayGroups && option.militaryDayGroups.length) {\r\n      terms.push(`У ребят из ${enumerate(...option.militaryDayGroups)} военка ${this.daysCase[option.day]}, что не очень удобно.`);\r\n    }\r\n\r\n    if (option.peDayGroups && option.peDayGroups.length) {\r\n      terms.push(`У ${enumerate(...option.peDayGroups)} в этот день физра, придётся таскаться с формой`);\r\n    }\r\n\r\n    if (option.freeDayGroups && option.freeDayGroups.length) {\r\n      terms.push(`Учтите, что групп${option.freeDayGroups.length === 1 ? 'ы' : ''}`);\r\n      terms.push(`${enumerate(...option.freeDayGroups)} в этот день нет пар`);\r\n    }\r\n\r\n    return terms.join(' ').replace(' .', '.');\r\n  }\r\n}\r\n","import { Injectable, ChangeDetectorRef } from '@angular/core';\r\nimport { MediaMatcher } from '@angular/cdk/layout';\r\nimport { Subject, BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ResponsiveService {\r\n\r\n  public readonly mobile = new BehaviorSubject<boolean>(false);\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Target } from '../models/target';\r\nimport { TargetsService } from './targets.service';\r\nimport { map, skip, tap, first, take } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class RouteParamsService {\r\n\r\n  constructor(\r\n    private readonly router: Router,\r\n    private readonly route: ActivatedRoute,\r\n    private readonly targets: TargetsService,\r\n  ) {\r\n    targets.targetsObservable.pipe(\r\n      skip(1),\r\n      map(ts => ts || []),\r\n    ).subscribe(this.updateRoute.bind(this));\r\n  }\r\n\r\n  public updateRoute(targets: Target[]) {\r\n    const groups = targets.map(target => target.group).join(',');\r\n    this.router.navigate([], {\r\n      relativeTo: this.route,\r\n      queryParams: groups.length && { groups } || {},\r\n      // queryParamsHandling: 'merge',\r\n    });\r\n  }\r\n\r\n  private async loadFromRoute() {\r\n    const groups = await this.route.queryParamMap.pipe(\r\n      skip(1),\r\n      map(params => params.get('groups')),\r\n      map(groupsString => groupsString && groupsString.split(',') || []),\r\n      first(),\r\n    ).toPromise();\r\n    for (const group of groups) {\r\n      this.targets.addGroup(group);\r\n    }\r\n  }\r\n\r\n  public init() {\r\n    this.loadFromRoute();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { TargetsService } from './targets.service';\r\nimport { switchMap, map, filter, repeatWhen } from 'rxjs/operators';\r\nimport {\r\n  GroupSchedule,\r\n  FullLesson,\r\n  ScheduleTimeSlot,\r\n  CombinedDaySchedule,\r\n  CombinedWeekSchedule,\r\n  WeekInfo\r\n} from '../models/schedule-models';\r\nimport _ from 'lodash';\r\nimport { BehaviorSubject, interval } from 'rxjs';\r\nimport { LessonNumberPipe } from '../pipes/lesson-number.pipe';\r\nimport { ApiService } from './api.service';\r\nimport { NowTimeService } from './now-time.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ScheduleService {\r\n\r\n  public readonly selectedLesson = new BehaviorSubject<FullLesson | null>(null);\r\n\r\n  constructor(\r\n    private readonly targets: TargetsService,\r\n    private readonly pipe: LessonNumberPipe,\r\n    private readonly nowTime: NowTimeService,\r\n  ) {\r\n    targets.targetsObservable.pipe(\r\n      filter(ts => !ts || this.selectedLesson.value && !ts.map(t => t.group).includes(this.selectedLesson.value.group) || false)\r\n    ).subscribe(() => this.selectedLesson.next(null));\r\n  }\r\n\r\n  public readonly combinedSchedule = this.targets.targetsObservable.pipe(\r\n    map(targets => targets || []),\r\n    switchMap(targets => Promise.all(targets.map(t => t.schedulePromise))),\r\n    map(this.flattenSchdeule.bind(this)),\r\n    map(lessons => lessons.map(\r\n      l => ({ ...l, name: l.name && l.name.replace('САМ РАБ', '').replace(/С\\/?Р/, '').replace('Самостоятельная работа', '') } as FullLesson)\r\n    )),\r\n    map(this.combineSchedules),\r\n    map(schedule => schedule && _.orderBy(schedule, s => s.weekName !== this.nowTime.currentWeek.weekName)),\r\n  );\r\n\r\n  private flattenSchdeule(schedules: GroupSchedule[]) {\r\n\r\n    const materialColors = [\r\n      '#16D1FF55',\r\n      '#B388FF55',\r\n      '#536DFE55',\r\n      '#64FFDA55',\r\n      '#DAF7A655',\r\n      '#CC1CFF55',\r\n      '#FFC30055',\r\n      '#B388FF55',\r\n      '#536DFE55',\r\n      '#64FFDA55',\r\n      '#16D1FF55',\r\n      '#CC1CFF55',\r\n      '#B388FF55',\r\n      '#536DFE55',\r\n      '#64FFDA55',\r\n      '#DAF7A655',\r\n      '#FFC30055',\r\n      '#B388FF55',\r\n      '#536DFE55',\r\n      '#64FFDA55',\r\n    ];\r\n\r\n    const flatLessons: FullLesson[] = _.flattenDeep(\r\n      schedules.map(({ name: group, days, }, i) => days.map(({ name: day, numerator, denominator }) => [\r\n        ...numerator.map(l => ({\r\n          ...l, group, day, week: 'числитель', color: materialColors[i],\r\n          lessonNumber: this.pipe.transform(l.timeRange)\r\n        } as FullLesson)),\r\n        ...denominator.map(l => ({\r\n          ...l, group, day, week: 'знаменатель', color: materialColors[i],\r\n          lessonNumber: this.pipe.transform(l.timeRange)\r\n        } as FullLesson)),\r\n      ]))\r\n    );\r\n    return flatLessons;\r\n  }\r\n\r\n  private combineSchedules(flatLessons: FullLesson[]) {\r\n\r\n    const schedule = Object.entries(_.groupBy(flatLessons, l => l.week)).map(([weekName, lessonsOfWeek]) => ({\r\n      weekName,\r\n      days: Object.entries(_.groupBy(lessonsOfWeek, l => l.day)).map(([dayName, lessonsOfDay]) => ({\r\n        dayName,\r\n        timeSlots: Object.entries(_.groupBy(lessonsOfDay, l => l.timeRange)).map(([timeRange, lessonsOfSlot]) => ({\r\n          timeRange,\r\n          groupsLessons: lessonsOfSlot\r\n        } as ScheduleTimeSlot)),\r\n      } as CombinedDaySchedule)),\r\n    } as CombinedWeekSchedule));\r\n\r\n    return schedule.length ? schedule : null;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Subject, of, merge, BehaviorSubject } from 'rxjs';\r\nimport { normalizeText } from '../utils/normalize-query';\r\nimport { map, mergeMap, filter, combineLatest, catchError, tap, startWith } from 'rxjs/operators';\r\nimport { combineLatest as combineLatestStatic } from 'rxjs';\r\nimport { GroupsService } from './groups.service';\r\nimport { TargetsService } from './targets.service';\r\nimport { ApiService } from './api.service';\r\nimport _ from 'lodash';\r\nimport { Student } from '../models/student';\r\nimport { compareStudents } from '../utils/compare-students';\r\nimport { SessionService } from './session.service';\r\nimport { HistoryService } from './history.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SearchService {\r\n\r\n  public readonly query = new BehaviorSubject<string>('');\r\n\r\n  // private change = merge(this.query, this.targets.targetsObservable);\r\n\r\n  public readonly searchedGroups = this.query.pipe(\r\n    map(normalizeText),\r\n    map(q => ([...this.groupsService.names].filter(g => g.includes(q)))),\r\n    combineLatest(this.targets.targetsObservable), // TODO: Check this\r\n    map(([groups, targets]) => groups.filter(g => !targets || !targets.map(t => t.group).includes(g))),\r\n    map(groups => _.orderBy(groups, group => this.history.history.get(group) || 0, 'desc')),\r\n  );\r\n\r\n  public readonly groups = this.searchedGroups.pipe(\r\n    map(groups => groups.length ? groups : null),\r\n  );\r\n\r\n  public readonly groupsCount = this.searchedGroups.pipe(\r\n    map(groups => groups.length),\r\n  );\r\n\r\n  // TODO: Handle update on targets\r\n  public readonly students = this.query.pipe(\r\n    map(normalizeText),\r\n    mergeMap(q => !q ? of<Student[]>([]) : this.api.searchStudents(q, 8, this.session.guid)),\r\n    combineLatest(this.targets.targetsStudents.pipe(startWith([]))),\r\n    map(([students, targetedStudents]) => students.filter(s => !_.find(targetedStudents || [], ts => compareStudents(s, ts)))),\r\n    // TODO: mark as noSchedule.\r\n    map(students => students.filter(s => this.groupsService.names.has(s.group))),\r\n    catchError(() => of<Student[]>([])),\r\n    map(students => students.length ? students : null),\r\n  );\r\n\r\n  public results = combineLatestStatic(this.groups, this.students).pipe(\r\n    map(([groups, students]) => ({ groups, students })),\r\n  );\r\n\r\n  constructor(\r\n    private readonly groupsService: GroupsService,\r\n    private readonly api: ApiService,\r\n    private readonly targets: TargetsService,\r\n    private readonly history: HistoryService,\r\n    private readonly session: SessionService,\r\n  ) { }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { createGuid } from '../utils/create-guid';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SessionService {\r\n\r\n  public readonly guid: string;\r\n  public readonly startTimeMs: number;\r\n\r\n  constructor() {\r\n    let guid = localStorage.getItem('sessionId');\r\n    if (!guid) {\r\n      guid = createGuid();\r\n      localStorage.setItem('sessionId', guid);\r\n    }\r\n    this.guid = guid;\r\n\r\n    let milliseconds: string | number | null = localStorage.getItem('sessionMs');\r\n    if (!milliseconds) {\r\n      milliseconds = new Date().getTime();\r\n      localStorage.setItem('sessionMs', milliseconds.toString());\r\n    }\r\n    this.startTimeMs = +milliseconds;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { StoredTarget, Target } from '../models/target';\r\nimport { ApiService } from './api.service';\r\nimport { GroupSchedule } from '../models/schedule-models';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class StorageService {\r\n\r\n  constructor(\r\n    private readonly api: ApiService,\r\n  ) { }\r\n\r\n  private readonly targetsKey = 'touch:targets';\r\n  private readonly groupsKey = 'touch:groups';\r\n  private readonly userKey = 'touch:user';\r\n  private readonly themeKey = 'touch:theme';\r\n  private readonly historyKey = 'touch:history';\r\n\r\n  private set<T>(key: string, obj: T) {\r\n    const stringified = JSON.stringify(obj);\r\n    localStorage.setItem(key, stringified);\r\n  }\r\n\r\n  private get<T>(key: string) {\r\n    const stringified = localStorage.getItem(key);\r\n    return stringified && JSON.parse(stringified) as T || null;\r\n  }\r\n\r\n  public getTargets() {\r\n    return this.get<StoredTarget[]>(this.targetsKey);\r\n  }\r\n\r\n  public setTargets(targets: Target[]) {\r\n    const storingTargets: StoredTarget[] = targets.map(({ group, students, color }) => ({ group, students, color }));\r\n    this.set(this.targetsKey, storingTargets);\r\n  }\r\n\r\n  public setGroups(groups: string[]) {\r\n    this.set(this.groupsKey, groups);\r\n  }\r\n\r\n  public getGroups() {\r\n    return this.get<string[]>(this.groupsKey);\r\n  }\r\n\r\n  public setHistory(history: Map<string, number>) {\r\n    const pairs = [...history.entries()];\r\n    this.set(this.historyKey, pairs);\r\n  }\r\n\r\n  public getHistory() {\r\n    const pairs = this.get<Array<[string, number]>>(this.historyKey) || [];\r\n    return new Map(pairs);\r\n  }\r\n\r\n  public setUser(userInfo: any) {\r\n    this.set(this.userKey, userInfo);\r\n  }\r\n\r\n  public getUser() {\r\n    return this.get(this.userKey);\r\n  }\r\n\r\n  public setTheme(isDark: boolean) {\r\n    return this.set(this.themeKey, isDark);\r\n  }\r\n\r\n  public getTheme() {\r\n    return this.get(this.themeKey);\r\n  }\r\n\r\n  public setGroupSchedule(schedule: GroupSchedule) {\r\n    const key = `touch:group:${schedule.name}`;\r\n    return this.set(key, schedule);\r\n  }\r\n\r\n  public getGroupSchedule(group: string) {\r\n    const key = `touch:group:${group}`;\r\n    return this.get<GroupSchedule>(key);\r\n  }\r\n\r\n  public hasGroupSchedule(group: string) {\r\n    const key = `touch:group:${group}`;\r\n    return localStorage.getItem(key) != null;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, of, timer } from 'rxjs';\r\nimport { Target } from '../models/target';\r\nimport { ApiService } from './api.service';\r\nimport _ from 'lodash';\r\nimport { map, retry, retryWhen, delayWhen } from 'rxjs/operators';\r\nimport { StorageService } from './storage.service';\r\nimport { Student } from '../models/student';\r\nimport { GroupSchedule } from '../models/schedule-models';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TargetsService {\r\n\r\n  constructor(\r\n    private readonly api: ApiService,\r\n    private readonly storage: StorageService,\r\n  ) {\r\n    if (location.search) {\r\n      return;\r\n    }\r\n    const targets = this.storage.getTargets();\r\n    if (!targets) {\r\n      return;\r\n    }\r\n    setTimeout(() => { // Чтобы успел подписаться метод обработки параметров роута\r\n      for (const target of targets) {\r\n        this.addGroup(target.group, target.students);\r\n      }\r\n    });\r\n  }\r\n\r\n  private targets: Target[] = [];\r\n\r\n  private readonly targetsSubject = new BehaviorSubject<Target[]>(this.targets);\r\n\r\n  public readonly targetsObservable = this.targetsSubject.asObservable().pipe(\r\n    map(targets => targets.length ? targets : null),\r\n  );\r\n\r\n  public readonly targetsStudents = this.targetsSubject.asObservable().pipe(\r\n    map(targets => _.flatten(targets.map(t => t.students || []))),\r\n    map(students => students.length ? students : null),\r\n  );\r\n\r\n  public addStudent(student: Student) {\r\n    // TODO: Implement as needed\r\n    const target = this.targetsSubject.value.find(t => t.group === student.group);\r\n    if (target) {\r\n      if (!target.students) {\r\n        target.students = [student];\r\n      } else {\r\n        target.students.push(student);\r\n      }\r\n      this.targetsSubject.next(this.targets);\r\n      this.storage.setTargets(this.targets);\r\n    } else {\r\n      this.addGroup(student.group, [student]);\r\n    }\r\n  }\r\n\r\n  public addGroup(group: string, students?: Student[]) {\r\n    const existedTarget = this.targets.find(t => t.group === group);\r\n    if (existedTarget) {\r\n      return existedTarget;\r\n    }\r\n\r\n    const cahcedSchedule = this.storage.getGroupSchedule(group);\r\n    const apiSchedule = this.api.getSchedule(group).pipe(\r\n      retryWhen(errors => errors.pipe(\r\n        delayWhen(() => timer(10000))\r\n      )),\r\n    ).toPromise() as Promise<GroupSchedule>;\r\n\r\n    const schedulePromise = cahcedSchedule\r\n      && of(cahcedSchedule).toPromise()\r\n      || apiSchedule;\r\n\r\n\r\n    if (!cahcedSchedule) {\r\n      schedulePromise.then(schedule => this.storage.setGroupSchedule(schedule));\r\n    } else {\r\n      apiSchedule.then(schedule => this.storage.setGroupSchedule(schedule));\r\n    }\r\n\r\n    const target: Target = {\r\n      group,\r\n      color: '#000000dd',\r\n      schedulePromise,\r\n      scheduleLoaded: false,\r\n      students\r\n    };\r\n\r\n    schedulePromise.then((d) => {\r\n      target.scheduleLoaded = true;\r\n    });\r\n\r\n    this.targets.push(target);\r\n    this.targetsSubject.next(this.targets);\r\n    this.storage.setTargets(this.targets);\r\n\r\n    return target;\r\n  }\r\n\r\n  public removeGroup(group: string) {\r\n    const target = this.targets.find(t => t.group === group);\r\n    _.remove(this.targets, target);\r\n    this.targetsSubject.next(this.targets);\r\n    this.storage.setTargets(this.targets);\r\n    return target;\r\n  }\r\n\r\n  public clear() {\r\n    this.targets = [];\r\n    this.targetsSubject.next(this.targets);\r\n    this.storage.setTargets(this.targets);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { StorageService } from './storage.service';\r\n\r\ntype ThemeType = 'light' | 'dark';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ThemeService {\r\n\r\n  private readonly html = document.getElementsByTagName('html').item(0)!;\r\n\r\n  private _isDark = false;\r\n\r\n  public get isDark() {\r\n    return this._isDark;\r\n  }\r\n  public set isDark(v: boolean) {\r\n    this._isDark = v;\r\n    this.html.className = this._isDark ? 'sdal-dark' : 'sdal-light';\r\n    this.storage.setTheme(this.isDark);\r\n  }\r\n\r\n\r\n  constructor(\r\n    private readonly storage: StorageService\r\n  ) {\r\n    const isDark = storage.getTheme();\r\n\r\n    if (typeof isDark === 'boolean') {\r\n      this.isDark = isDark;\r\n    }\r\n  }\r\n\r\n\r\n}\r\n","import { Student } from '../models/student';\r\n\r\nexport function compareStudents(student1: Student, student2: Student) {\r\n    return student1.name === student2.name\r\n        && student1.group === student2.group\r\n        && student1.vk_id === student2.vk_id;\r\n}\r\n","export function createGuid() {\r\n    const u = Date.now().toString(16) + Math.random().toString(16) + '0'.repeat(16);\r\n    const guid = [u.substr(0, 8), u.substr(8, 4), '4000-8' + u.substr(13, 3), u.substr(16, 12)].join('-');\r\n    return guid;\r\n}\r\n","const days = {\r\n    1: 'пн',\r\n    2: 'вт',\r\n    3: 'ср',\r\n    4: 'чт',\r\n    5: 'пт',\r\n    6: 'сб',\r\n    7: 'вс',\r\n};\r\n\r\nexport type DayNumber = 1 | 2 | 3 | 4 | 5 | 6 | 7;\r\n\r\nexport function getDayFromNuber(dayNumber: DayNumber) {\r\n    return days[dayNumber];\r\n}\r\n","const campuses = {\r\n    л: 'УЛК',\r\n    ю: 'ГЗ',\r\n    э: 'Энерго',\r\n    м: 'Машиностроение',\r\n    // : 'Машиностроение',\r\n} as any;\r\n\r\nexport function getCampus(classroom: string): string | null {\r\n    const normalized = classroom.toLowerCase();\r\n\r\n    if (classroom.includes('каф')) {\r\n        return null;\r\n    }\r\n\r\n    let letter = normalized.replace(/.*\\d+/, '');\r\n\r\n    if (campuses.hasOwnProperty(letter)) {\r\n        letter = campuses[letter];\r\n    }\r\n\r\n    return letter;\r\n}\r\n","export function enumerate(...terms: string[]): string {\r\n    if (terms.length === 1) {\r\n        return terms[0];\r\n    }\r\n\r\n    const [last, ...rest] = terms.reverse();\r\n    return rest.join(', ') + ` и ${last}`;\r\n}\r\n","const map = {\r\n    q: 'й',\r\n    w: 'ц',\r\n    e: 'у',\r\n    r: 'к',\r\n    t: 'е',\r\n    y: 'н',\r\n    u: 'г',\r\n    i: 'ш',\r\n    o: 'щ',\r\n    p: 'з',\r\n    '[': 'х',\r\n    ']': 'ъ',\r\n    a: 'ф',\r\n    s: 'ы',\r\n    d: 'в',\r\n    f: 'а',\r\n    g: 'п',\r\n    h: 'р',\r\n    j: 'о',\r\n    k: 'л',\r\n    l: 'д',\r\n    ';': 'ж',\r\n    '\\'': 'э',\r\n    z: 'я',\r\n    x: 'ч',\r\n    c: 'с',\r\n    v: 'м',\r\n    b: 'и',\r\n    n: 'т',\r\n    m: 'ь',\r\n    ',': 'б',\r\n    '.': 'ю',\r\n    '/': '.',\r\n};\r\n\r\nexport function normalizeText(query: string) {\r\n    const lower = query.toLowerCase();\r\n    let ruLayout = lower;\r\n    for (const letter in map) {\r\n        if (map.hasOwnProperty(letter)) {\r\n            ruLayout = ruLayout.split(letter).join((map as any)[letter]);\r\n        }\r\n    }\r\n    const singleSpaced = ruLayout.split(/\\s+/).join(' ');\r\n    return singleSpaced.toUpperCase();\r\n}\r\n","export function randomElement<T>(array: T[]) {\r\n    return array[Math.floor(Math.random() * array.length)];\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  // backendOrigin: 'http://95.216.188.201:3000',\r\n  // backendOrigin: 'http://78.107.233.19:3000',\r\n  // backendOrigin: 'http://localhost:3000',\r\n  // backendOrigin: 'http://sergsol.sdal.pw:3000',\r\n  backendOrigin: '',\r\n  vkAppId: 7178114,\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","\r\nimport { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n\r\nif ('serviceWorker' in navigator && environment.production) {\r\n  navigator.serviceWorker.register('./ngsw-worker.js');\r\n}\r\n"],"sourceRoot":"webpack:///"}